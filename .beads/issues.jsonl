{"id":"visionboard-03x","title":"Update docs/ONBOARDING.md project layout and key files","description":"The onboarding doc shows outdated file list. Update Project Layout section to show current modules. Update 'Key Files to Understand' to mention canvas-core.js (replaces canvas.js), selection.js, context-menu.js, and other critical modules.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-09T13:26:18.860174072-05:00","updated_at":"2025-12-09T13:33:31.752487918-05:00","closed_at":"2025-12-09T13:33:31.752487918-05:00","close_reason":"Updated ONBOARDING.md with current modular architecture (32 JS files), expanded Key Files section, fixed all canvas.js references. Commit c9a3468."}
{"id":"visionboard-045","title":"Add element info tooltip on hover","description":"Show element dimensions and position on hover.\n\n## Tooltip Content\n- Dimensions: W x H (e.g., '200 x 150')\n- Position: X, Y coordinates\n- For images: original filename if available\n- For folders: target canvas name\n\n## Behavior\n- Show after short hover delay (~500ms)\n- Position tooltip near element, not blocking it\n- Hide immediately on mouse leave\n- Don't show during drag/resize operations\n\n## UI Design\n- Small, unobtrusive tooltip\n- Match application theme\n- Optional: toggle in preferences","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-09T11:26:48.400219735-05:00","updated_at":"2025-12-09T12:24:07.125817641-05:00","closed_at":"2025-12-09T12:24:07.125817641-05:00","close_reason":"Added element-tooltip.js with hover detection, positioning, and content display. Integrated with canvas-elements.js for automatic attachment to all interactive elements."}
{"id":"visionboard-0xt","title":"Create docs/MODULES.md with one-liner descriptions for all JS files","description":"Create a quick reference doc listing all 32 JS modules in public/js/ with a one-sentence description of each module's responsibility. Group by category (core, interaction, UI, tools, etc).","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-09T13:26:19.092203288-05:00","updated_at":"2025-12-09T13:35:24.100029017-05:00","closed_at":"2025-12-09T13:35:24.100029017-05:00","close_reason":"Created docs/MODULES.md with one-liner descriptions for all 32 JS modules organized by category. Commit 9ef90a3."}
{"id":"visionboard-0yf","title":"Remove dead code in export.js","description":"export.js contains unused/duplicate functions:\n- embedImagesInSVG() is never called (only embedImagesInSVGForExport() is used)\n- imageToDataUrl() duplicates convertImageToDataUrl()\n\nRemove the dead code.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-10T19:12:13.64869-05:00","created_by":"andy","updated_at":"2026-01-10T19:49:48.263229-05:00","closed_at":"2026-01-10T19:49:48.263229-05:00","close_reason":"Removed embedImagesInSVG() and imageToDataUrl() dead code; updated exportCanvasToJSON() to use convertImageToDataUrl()"}
{"id":"visionboard-1gj","title":"Update docs/ARCHITECTURE.md module dependency diagram","description":"The Frontend Module Dependencies D2 diagram is outdated. Update to show current module structure including canvas-core.js, canvas-elements.js, canvas-resize.js, selection.js, context-menu.js, undo-redo.js, and other key modules with their relationships.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-09T13:26:18.974565805-05:00","updated_at":"2025-12-09T13:34:44.51900636-05:00","closed_at":"2025-12-09T13:34:44.51900636-05:00","close_reason":"Updated ARCHITECTURE.md with layered module dependency diagram (Core, Interaction, Tools, Visual, UI, API layers). Commit fb2cc49."}
{"id":"visionboard-1y3","title":"Set up proper test infrastructure","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-08T19:46:21.405390052-05:00","updated_at":"2025-12-08T19:50:49.454460993-05:00","closed_at":"2025-12-08T19:50:49.454460993-05:00","close_reason":"Infrastructure complete: test/ directory, playwright.config.js, npm test scripts (test, test:e2e, test:unit), 4 passing smoke tests"}
{"id":"visionboard-1y3.1","title":"Organize tests into proper test/ directory structure","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T19:46:29.112051852-05:00","updated_at":"2025-12-08T19:50:57.925484017-05:00","closed_at":"2025-12-08T19:50:57.925484017-05:00","close_reason":"Completed as part of epic visionboard-1y3. test/ directory created with e2e/, unit/, fixtures/ subdirectories","dependencies":[{"issue_id":"visionboard-1y3.1","depends_on_id":"visionboard-1y3","type":"parent-child","created_at":"2025-12-08T19:46:29.112512568-05:00","created_by":"daemon"}]}
{"id":"visionboard-1y3.2","title":"Configure npm test script with Playwright test runner","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T19:46:29.214842677-05:00","updated_at":"2025-12-08T19:50:58.011845032-05:00","closed_at":"2025-12-08T19:50:58.011845032-05:00","close_reason":"Completed as part of epic visionboard-1y3. npm test configured with Playwright, test:e2e and test:unit scripts added","dependencies":[{"issue_id":"visionboard-1y3.2","depends_on_id":"visionboard-1y3","type":"parent-child","created_at":"2025-12-08T19:46:29.215289431-05:00","created_by":"daemon"}]}
{"id":"visionboard-1y3.3","title":"Add unit tests for backend API routes","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T19:46:29.310185721-05:00","updated_at":"2025-12-08T19:55:40.111404643-05:00","closed_at":"2025-12-08T19:55:40.111404643-05:00","close_reason":"Added 10 API endpoint tests covering Canvas CRUD (create, read, update, delete) and Tree API operations. Tests run via Playwright with server auto-start.","dependencies":[{"issue_id":"visionboard-1y3.3","depends_on_id":"visionboard-1y3","type":"parent-child","created_at":"2025-12-08T19:46:29.311239404-05:00","created_by":"daemon"}]}
{"id":"visionboard-1y3.4","title":"Clean up temp/ directory - archive useful tests, remove debugging scripts","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-08T19:46:29.406351013-05:00","updated_at":"2025-12-08T20:05:53.071980038-05:00","closed_at":"2025-12-08T20:05:53.071980038-05:00","close_reason":"Removed temp/ directory. Moved useful old test files and D2 diagrams to archive/ for reference. Removed ~100 debug scripts and test screenshots.","dependencies":[{"issue_id":"visionboard-1y3.4","depends_on_id":"visionboard-1y3","type":"parent-child","created_at":"2025-12-08T19:46:29.407301506-05:00","created_by":"daemon"}]}
{"id":"visionboard-20i","title":"Add ruler and guides for precise alignment","description":"Add rulers along canvas edges with draggable guides.\n\n## Rulers\n- Horizontal ruler along top edge\n- Vertical ruler along left edge\n- Show measurements in pixels\n- Tick marks adjust based on zoom level\n- Current mouse position highlighted on rulers\n\n## Guides\n- Drag from ruler to create guide line\n- Guides are visual-only (don't affect elements)\n- Elements can optionally snap to guides (when grid snap is on)\n- Right-click guide to delete\n- Guides stored per-canvas\n\n## UI\n- Toggle rulers visibility (View menu or keyboard shortcut)\n- Guides are semi-transparent colored lines\n- Guide color configurable\n\n## Data Model\n- Store guides in canvas data: guides: [{ axis: 'x'|'y', position: number }]","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-09T11:26:30.683992566-05:00","updated_at":"2025-12-09T12:30:05.606987833-05:00","closed_at":"2025-12-09T12:30:05.606987833-05:00","close_reason":"Added ruler-guides.js with horizontal/vertical rulers, draggable guide lines, snap integration, and Ctrl+R toggle. Guides stored per-canvas in canvas data."}
{"id":"visionboard-2mp","title":"Add schema validation to loadCanvas()","description":"Canvas data is loaded and rendered without validation, risking runtime errors from malformed data.\n\n## Problem\n- `loadCanvas()` in canvas-core.js fetches canvas data and passes it directly to `renderCanvas()`\n- `renderCanvas()` accesses properties like `element.type`, `element.src` without null checks\n- Malformed canvas data could cause silent failures or crashes\n\n## Solution\nAdd a `validateCanvasData()` function similar to the existing `validateImportData()` in export.js.\n\n## Implementation\n```javascript\nfunction validateCanvasData(canvas) {\n    if (\\!canvas || typeof canvas \\!== 'object') return false;\n    if (\\!Array.isArray(canvas.elements)) return false;\n    \n    for (const element of canvas.elements) {\n        if (\\!element.id || \\!element.type) return false;\n        if (typeof element.x \\!== 'number' || typeof element.y \\!== 'number') return false;\n        if (typeof element.width \\!== 'number' || typeof element.height \\!== 'number') return false;\n    }\n    return true;\n}\n\nasync function loadCanvas(canvasId) {\n    try {\n        const data = await window.canvasAPI.get(canvasId);\n        if (\\!validateCanvasData(data)) {\n            console.error('Invalid canvas data:', canvasId);\n            // Handle gracefully - show error or use empty canvas\n        }\n        currentCanvas = data;\n        // ...\n    }\n}\n```\n\n## Files to modify\n- public/js/canvas-core.js","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T20:43:51.097255-05:00","created_by":"andy","updated_at":"2026-01-10T20:43:51.097255-05:00"}
{"id":"visionboard-2q6","title":"Fix JS module count in documentation (32 → 34)","description":"CLAUDE.md, ONBOARDING.md, and MODULES.md all claim there are 32 JS files in public/js/, but there are actually 34.\n\n## Missing from documentation\n- `bounds-utils.js` - Bounds calculation utilities\n- `notification.js` - User notification system\n\n## Files to update\n1. CLAUDE.md line 37: Change '32 files' to '34 files'\n2. CLAUDE.md project structure: Add bounds-utils.js and notification.js entries\n3. ONBOARDING.md line 73: Change '32 modular JS files' to '34 modular JS files'\n4. docs/MODULES.md: Add entries for bounds-utils.js and notification.js\n\n## Verification\n```bash\nls public/js/*.js | wc -l  # Should show 34\n```","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T20:43:24.845019-05:00","created_by":"andy","updated_at":"2026-01-10T20:43:24.845019-05:00"}
{"id":"visionboard-2rz","title":"Remove or archive stale planning docs","description":"Clean up obsolete markdown files now that bd is used for issue tracking: plan.md, phase_three_tasks.md, plan_phase_three.md, ISSUES.md. Either delete them or move to a docs/archive/ folder.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-09T13:26:19.216031291-05:00","updated_at":"2025-12-09T13:35:54.375530189-05:00","closed_at":"2025-12-09T13:35:54.375530189-05:00","close_reason":"Archived stale planning docs to docs/archive/ (ISSUES.md, phase_three_tasks.md, plan.md, plan_phase_three.md). Commit c3445fa."}
{"id":"visionboard-2s5","title":"Selection box doesn't follow element during drag","description":"When dragging a selected element, the blue selection border stays in place and only snaps to the element's new position when dragging stops. The selection box should move in real-time with the element during drag operations.\n\nObserved: Selection box remains static during drag, then jumps to final position\nExpected: Selection box moves continuously with the element being dragged\n\nThis creates visual disconnect and makes it harder to judge placement during drag operations.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-08T21:04:43.658183117-05:00","updated_at":"2025-12-08T21:12:08.827109651-05:00","closed_at":"2025-12-08T21:12:08.827109651-05:00","close_reason":"Closed"}
{"id":"visionboard-404","title":"Add 'New Canvas' button to sidebar navigator","description":"Add a button in the canvas navigator sidebar flyout to quickly create new canvases. This allows faster canvas creation and switching without using the toolbar.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-08T21:25:58.85641426-05:00","updated_at":"2025-12-08T21:31:43.565300159-05:00","closed_at":"2025-12-08T21:31:43.565300159-05:00","close_reason":"Closed"}
{"id":"visionboard-4io","title":"Add filter presets (B\u0026W, Vintage, High Contrast, etc.)","description":"Provide quick filter presets for common looks.\n\n## Presets\n- B\u0026W: grayscale 100%\n- Vintage: sepia 40%, contrast 110%, brightness 95%\n- High Contrast: contrast 150%, brightness 105%\n- Faded: contrast 80%, brightness 110%, saturate 80%\n- Dramatic: contrast 130%, brightness 90%, saturate 120%\n- Muted: saturate 50%, brightness 105%\n- Warm: sepia 20%, saturate 110%\n- Cool: hue-rotate 180deg, saturate 80%\n\n## Requirements\n- Accessible from context menu submenu or filter panel\n- One-click apply\n- Can be further adjusted after applying\n- Reset option to clear preset\n\n## Dependencies\n- Requires non-destructive image filters system","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-09T11:25:14.539779697-05:00","updated_at":"2025-12-09T12:17:54.529753924-05:00","closed_at":"2025-12-09T12:17:54.529753924-05:00","close_reason":"Implemented 8 filter presets (B\u0026W, Vintage, High Contrast, Faded, Dramatic, Muted, Warm, Cool) with context menu and filter panel integration","dependencies":[{"issue_id":"visionboard-4io","depends_on_id":"visionboard-ctv","type":"blocks","created_at":"2025-12-09T11:27:24.425633535-05:00","created_by":"daemon"}]}
{"id":"visionboard-4kw","title":"Add element grouping functionality","description":"Allow grouping multiple elements to move/transform as a unit.\n\n## Behavior\n- Select multiple elements, then Group (Cmd/Ctrl+G)\n- Grouped elements move together\n- Grouped elements resize together (proportionally)\n- Can still select individual elements within group (Cmd/Ctrl+click)\n- Ungroup command (Cmd/Ctrl+Shift+G)\n\n## Implementation\n- Create 'group' element type that contains child element references\n- Store group ID on child elements\n- Group has its own bounding box calculated from children\n- Dragging group moves all children\n- Resizing group scales all children proportionally\n\n## Data Model\n{\n  'id': 'group-xxx',\n  'type': 'group',\n  'children': ['element-1', 'element-2'],\n  'x': calculated,\n  'y': calculated,\n  'width': calculated,\n  'height': calculated\n}\n\n## Requirements\n- Context menu: 'Group' (when multiple selected), 'Ungroup' (when group selected)\n- Keyboard shortcuts: Cmd/Ctrl+G to group, Cmd/Ctrl+Shift+G to ungroup\n- Groups can be nested\n- Integrate with undo/redo system\n- Persists through save/load","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-09T11:26:05.970661754-05:00","updated_at":"2025-12-09T12:06:39.079481996-05:00","closed_at":"2025-12-09T12:06:39.079481996-05:00","close_reason":"Implemented element grouping with Ctrl+G/Ctrl+Shift+G shortcuts, context menu integration, and persistent storage"}
{"id":"visionboard-55j","title":"Resize handles render behind overlapping elements","description":"When an element is selected, the resize drag handles (white corner circles) can be obscured by other overlapping elements on the canvas. The handles should always render on top of all canvas content to ensure they remain clickable/draggable regardless of element stacking order.\n\nObserved: Selection handles appear behind other images (see screenshot)\nExpected: Handles should always be on top, fully visible and interactive\n\nFix likely involves setting higher z-index on the selection handles group in canvas.js or CSS.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-08T21:03:25.294408092-05:00","updated_at":"2025-12-08T21:10:22.913214508-05:00","closed_at":"2025-12-08T21:10:22.913214508-05:00","close_reason":"Closed"}
{"id":"visionboard-6e8","title":"Simplify resizeElement() position calculation with anchor table","description":"Replace the switch statement for position calculation (lines 242-259) with a corner anchor lookup table. Each corner anchors the opposite corner - this pattern can be expressed declaratively. For example, NW anchors SE so newX/newY need adjustment, while SE anchors NW so position stays same.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T17:02:24.67861-05:00","created_by":"andy","updated_at":"2026-01-10T18:43:02.814896-05:00","closed_at":"2026-01-10T18:43:02.814896-05:00","close_reason":"Replaced switch statement with anchor coefficient table in CORNER_COEFFICIENTS. Position calculation now uses newX = startX + anchorX * (startWidth - newWidth) pattern.","comments":[{"id":12,"issue_id":"visionboard-6e8","author":"andy","text":"Commit a8c249b: Replaced switch statement (lines 232-249) with declarative anchor coefficient table. Each corner now specifies both scale coefficients and anchor coefficients in CORNER_COEFFICIENTS. Tested all 4 corners via Playwright - SE anchors NW (position unchanged), NW anchors SE (both axes shift), NE anchors SW (only Y shifts), SW anchors NE (only X shifts).","created_at":"2026-01-10T23:42:58Z"}]}
{"id":"visionboard-6s0","title":"Consolidate bounds calculation utilities","description":"Three similar bounds calculation functions exist:\n- grouping.js: calculateGroupBounds()\n- zoom-controls.js: getAllElementsBounds()\n- export.js: calculateElementsBounds()\n\nIMPORTANT: Be careful about coordinate systems - some may use grid coordinates vs pixel coordinates. Analyze each usage carefully before consolidating to ensure the abstraction handles both cases correctly.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T19:12:13.368629-05:00","created_by":"andy","updated_at":"2026-01-10T19:35:01.746174-05:00","closed_at":"2026-01-10T19:35:01.746174-05:00","close_reason":"Consolidated bounds calculation utilities into shared bounds-utils.js module. Functions in grouping.js, zoom-controls.js, export.js, and alignment.js now delegate to the unified module which handles SVG.js elements, DOM elements, and plain data objects.","comments":[{"id":17,"issue_id":"visionboard-6s0","author":"andy","text":"Commit a547173: Created bounds-utils.js with unified bounds calculation functions. Updated grouping.js, zoom-controls.js, export.js, and alignment.js to use the new module.","created_at":"2026-01-11T00:34:57Z"}]}
{"id":"visionboard-6x3","title":"Add file locking or conflict detection for concurrent canvas edits","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-08T19:46:55.490388863-05:00","updated_at":"2025-12-08T20:31:54.382948044-05:00","closed_at":"2025-12-08T20:31:54.382948044-05:00","close_reason":"Deprioritized: last-write-wins is acceptable for current use case. Focus shifting to OPML export/import for file-based workflows."}
{"id":"visionboard-7nw","title":"Implement folder color change from context menu","description":"The folder context menu shows 'Change Color' option but it just logs 'Folder color - not yet implemented' at context-menu.js:598. Should show a color picker to change the folder's fill color.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-09T13:17:35.78051756-05:00","updated_at":"2025-12-09T13:22:17.677343991-05:00","closed_at":"2025-12-09T13:22:17.677343991-05:00","close_reason":"Implemented folder color picker with 8 preset colors. Commit e14624e."}
{"id":"visionboard-7vf","title":"Remove dead lock action handler in context-menu.js","description":"There's a duplicate unreachable 'case lock:' block at context-menu.js:550-552 that just logs 'Lock - not yet implemented'. The working lock handler is at lines 498-501. This dead code should be removed.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-09T13:17:35.995601167-05:00","updated_at":"2025-12-09T13:18:23.89118948-05:00","closed_at":"2025-12-09T13:18:23.89118948-05:00","close_reason":"Removed duplicate unreachable case 'lock' block. Commit 5e2f168."}
{"id":"visionboard-7ye","title":"Remove debug console.log statements from production code (canvas.js:1 has emoji version logging)","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-08T19:46:38.168140337-05:00","updated_at":"2025-12-08T19:59:28.342632556-05:00","closed_at":"2025-12-08T19:59:28.342632556-05:00","close_reason":"Removed 49 debug console.log statements from canvas.js, touch.js, drag-drop.js, drawing-tools.js. Kept error logging and Tauri environment detection."}
{"id":"visionboard-85m","title":"Add OPML export/import for canvas hierarchy","description":"Implement OPML (Outline Processor Markup Language) export and import for the canvas hierarchy.\n\n## Why OPML\n- Standard XML-based outlining format\n- Handles hierarchical data (canvas tree with folders) naturally\n- Robust against special characters in labels (proper XML escaping)\n- Widely supported by outline tools, can interop with other apps\n\n## Export\n- Export entire canvas tree to .opml file\n- Each canvas becomes an outline node\n- Folder elements create child nodes linking to their target canvases\n- Include element metadata as OPML attributes or nested nodes\n- Handle images: either embed as base64 or reference external paths\n\n## Import\n- Load .opml file and reconstruct canvas hierarchy\n- Create canvases for each outline node\n- Recreate folder links between canvases\n- Handle image references appropriately\n\n## UI\n- Export OPML button in toolbar (alongside existing JSON export)\n- Import OPML option (alongside existing JSON import)\n- Consider: export single canvas vs export entire tree\n\n## Replaces\n- Current naive markdown/ASCII indent format\n- More rigorous than current JSON export for hierarchy","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-08T20:32:07.870111002-05:00","updated_at":"2025-12-08T20:37:48.460001082-05:00","closed_at":"2025-12-08T20:37:48.460001082-05:00","close_reason":"Implemented OPML export/import - commit 288365a"}
{"id":"visionboard-8o4","title":"Implement undo/redo functionality for canvas operations","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-08T19:46:47.476853873-05:00","updated_at":"2025-12-08T20:19:28.125783441-05:00","closed_at":"2025-12-08T20:19:28.125783441-05:00","close_reason":"Implemented undo/redo with state snapshots, Ctrl+Z/Ctrl+Shift+Z shortcuts, toolbar buttons"}
{"id":"visionboard-914","title":"Add grid/snap alignment option for precise element positioning","description":"Add grid overlay and snap-to-grid functionality for precise element positioning.\n\n## Visual Grid\n- Toggleable visible grid overlay on canvas\n- Grid spacing: 20-50px range, configurable via CONFIG\n- Grid toggle via toolbar button + keyboard shortcut\n\n## Snap Behavior\n- Elements snap while dragging (magnetic threshold ~5-10px)\n- Snap to grid lines when enabled\n- Snap toggle via toolbar button + keyboard shortcut\n- Independent toggles: can have grid visible without snap, or snap without visible grid\n\n## UI\n- Toolbar buttons for grid visibility and snap toggle\n- Keyboard shortcuts (e.g., G for grid, S for snap)\n- Add to keyboard help overlay","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-08T19:46:55.292373752-05:00","updated_at":"2025-12-08T20:40:25.514330169-05:00","closed_at":"2025-12-08T20:40:25.514330169-05:00","close_reason":"Implemented grid/snap feature - commit e86f69b"}
{"id":"visionboard-91n","title":"Resize handles don't maintain aspect ratio for images","description":"When resizing an image, the resize handles (rectangle outline) can be stretched to any aspect ratio, even though the image itself correctly maintains its aspect ratio within the bounds.\n\n**Location:** `public/js/canvas-resize.js` - `resizeElement()` function (lines 186-261)\n\n**Problem:** The function calculates `newWidth` and `newHeight` independently based on mouse delta. For images (line 258-259), it just applies `element.size(newWidth, newHeight)` without constraining to the original aspect ratio.\n\n**Fix needed:** For image elements, constrain the resize operation to maintain aspect ratio:\n1. Calculate the aspect ratio from `startData.elementWidth / startData.elementHeight`\n2. When dragging a corner handle, use diagonal movement to determine scale factor\n3. Apply that scale to both dimensions proportionally\n4. Adjust position (x, y) appropriately based on which corner is being dragged\n\n**Note:** Folders should continue to allow free-form resizing (they already have special handling in the function).","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-10T16:34:38.510361-05:00","created_by":"andy","updated_at":"2026-01-10T16:59:05.862075-05:00","closed_at":"2026-01-10T16:59:05.862075-05:00","close_reason":"Fixed image resize to maintain aspect ratio. All four corner handles (nw, ne, sw, se) now properly constrain images to their original proportions while allowing diagonal scaling. Folders retain free-form resizing behavior.","comments":[{"id":10,"issue_id":"visionboard-91n","author":"andy","text":"Commit 6946413: Implemented aspect ratio preservation for image resize handles. The resizeElement() function now calculates a scale factor from diagonal mouse movement and applies it proportionally to both width and height. Folders retain free-form resizing.","created_at":"2026-01-10T21:59:00Z"}]}
{"id":"visionboard-9al","title":"Fix incorrect test instructions in CLAUDE.md","description":"CLAUDE.md contains incorrect test instructions that reference non-existent files.\n\n## Current (incorrect)\n```\n- Run individual test files: `node test-[name].js` (e.g., `node test-visit.js`)\n- Tests are not integrated into npm scripts; must be run manually\n- Test files include: visit, upload, resize, hierarchy, breadcrumb, folder-nav functionality\n```\n\n## Reality\n- No `test-*.js` files exist at project root\n- Tests ARE in npm scripts: `npm test`, `npm run test:e2e`, `npm run test:unit`\n- Actual test files:\n  - `test/e2e/canvas.spec.js`\n  - `test/e2e/canvas-api.spec.js`\n  - `test/e2e/smoke.spec.js`\n  - `test/unit/validation.test.js`\n\n## Correct instructions\n```\n### Testing\n- Uses Playwright for browser automation tests\n- `npm test` - Run all e2e tests\n- `npm run test:unit` - Run unit tests\n- Test files in `test/e2e/` and `test/unit/`\n```","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-10T20:43:24.981803-05:00","created_by":"andy","updated_at":"2026-01-10T20:43:24.981803-05:00"}
{"id":"visionboard-9qa","title":"Extract magic numbers to configuration constants (10MB upload limit, zoom levels, etc.)","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-08T19:46:47.373776167-05:00","updated_at":"2025-12-08T20:08:39.742699923-05:00","closed_at":"2025-12-08T20:08:39.742699923-05:00","close_reason":"Created config.js with CONFIG object containing all major constants (canvas viewport, zoom, element dimensions, resize handles, touch settings, autosave delays, selection styling). Updated canvas.js and touch.js."}
{"id":"visionboard-axq","title":"Shift+click bypasses element selection when hand tool active","description":"When the hand tool is selected, holding Shift while clicking should keep the pan behavior even if clicking on an image or element. Currently clicking on an element selects it instead of panning.\n\n**Use case:** User wants to pan around the canvas freely without accidentally selecting elements.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-10T18:59:35.452182-05:00","created_by":"andy","updated_at":"2026-01-10T19:02:23.745887-05:00","closed_at":"2026-01-10T19:02:23.745887-05:00","close_reason":"Shift+hand tool now bypasses element selection for panning"}
{"id":"visionboard-b4m","title":"Add Express error handling middleware for consistent API error responses","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T19:46:38.449237393-05:00","updated_at":"2025-12-08T20:00:58.94324848-05:00","closed_at":"2025-12-08T20:00:58.94324848-05:00","close_reason":"Added error handler middleware with APIError class, asyncHandler wrapper, and helper functions. Refactored canvas routes to use centralized error handling."}
{"id":"visionboard-bb1","title":"Add multi-select support for bulk move/delete/resize operations","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-08T19:46:55.187814651-05:00","updated_at":"2025-12-08T20:23:08.75110239-05:00","closed_at":"2025-12-08T20:23:08.75110239-05:00","close_reason":"Multi-select with Shift/Ctrl+click, bulk move and delete support"}
{"id":"visionboard-c5s","title":"clean git dir","description":".beads, .claude, etc. lots of untracked or modified files, please cleanup and get us to clean","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T19:00:29.60221-05:00","created_by":"andy","updated_at":"2026-01-10T19:05:18.788937-05:00","closed_at":"2026-01-10T19:05:18.788937-05:00","close_reason":"Git directory cleaned: added beads tracking, fixed .gitignore, removed machine-specific and incorrectly tracked files. Working tree is now clean.","comments":[{"id":14,"issue_id":"visionboard-c5s","author":"andy","text":"Commit c31122d: Cleaned up git directory - added beads issue tracking, updated .gitignore, removed incorrectly tracked files (.claude/settings.local.json and node_modules/.package-lock.json)","created_at":"2026-01-11T00:05:14Z"}]}
{"id":"visionboard-c7r","title":"Add layers panel for element management","description":"Create a panel showing all canvas elements with reordering and visibility controls.\n\n## Panel Features\n- List all elements on current canvas\n- Show element type icon and name/preview\n- Drag to reorder (changes z-index)\n- Eye icon to toggle visibility\n- Lock icon to toggle locked state\n- Click to select element on canvas\n- Double-click to rename (for folders)\n\n## UI Design\n- Collapsible panel on left or right side\n- Match Linear-inspired dark minimal aesthetic\n- Keyboard shortcut to toggle panel visibility\n\n## Element Display\n- Images: Show thumbnail preview\n- Folders: Show folder icon + name\n- Rectangles: Show colored rectangle icon\n- Groups: Show expandable tree with children\n\n## Requirements\n- Real-time sync with canvas state\n- Supports multi-selection (Cmd/Ctrl+click, Shift+click)\n- Search/filter functionality (optional)\n\n## Dependencies\n- Benefits from element grouping feature","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-09T11:26:30.57754916-05:00","updated_at":"2025-12-09T12:14:55.120119412-05:00","closed_at":"2025-12-09T12:14:55.120119412-05:00","close_reason":"Implemented layers panel with visibility/lock toggles, drag reorder, selection sync, and keyboard shortcut (Shift+L)"}
{"id":"visionboard-cou","title":"Simplify resizeElement() scale calculation with coefficient table","description":"Replace the switch statement for scale calculation (lines 204-222) with a corner coefficient lookup table. Each corner has different signs for deltaX and deltaY - this can be expressed as { nw: [-1,-1], ne: [1,-1], sw: [-1,1], se: [1,1] } and used to compute scale in one formula.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T17:02:24.544302-05:00","created_by":"andy","updated_at":"2026-01-10T17:06:03.980163-05:00","closed_at":"2026-01-10T17:06:03.980163-05:00","close_reason":"Refactored scale calculation with coefficient table - 19 lines reduced to 3-line formula","comments":[{"id":11,"issue_id":"visionboard-cou","author":"andy","text":"Commit 596ca16: Replaced switch statement with CORNER_COEFFICIENTS lookup table. Table maps corner names (nw, ne, sw, se) to [coeffX, coeffY] pairs. Single formula now calculates scale: 1 + (coeffX * deltaX + coeffY * deltaY) / (width + height)","created_at":"2026-01-10T22:06:00Z"}]}
{"id":"visionboard-cr9","title":"Add contract tests for Tauri/Express API parity","description":"The project has two backends (Express server and Tauri desktop app) that must behave identically, but there are no tests verifying this.\n\n## Risk\n- api-adapter.js routes calls to either backend based on environment\n- Tree operations (addCanvas, removeCanvas) have different implementations:\n  - Express: server-side routes in routes/tree.js\n  - Tauri: client-side manipulation in api-adapter.js\n- Drift between implementations could cause inconsistent behavior\n\n## Proposed solution\nCreate contract tests that:\n1. Call each API endpoint with the same input\n2. Verify responses have the same shape\n3. Verify side effects are equivalent\n\n## Test scenarios needed\n- `canvasAPI.get(id)` - returns same canvas structure\n- `canvasAPI.create(name, parentId)` - creates with same defaults\n- `canvasAPI.update(id, data)` - preserves all fields\n- `treeAPI.addCanvas()` - tree structure matches\n- `treeAPI.removeCanvas()` - orphan handling matches\n\n## Implementation options\n1. Mock Tauri invoke in Playwright tests\n2. Run separate test suites against each backend\n3. Create shared test fixtures both backends must pass","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-10T20:43:51.367396-05:00","created_by":"andy","updated_at":"2026-01-10T20:43:51.367396-05:00"}
{"id":"visionboard-ctv","title":"Add non-destructive image filters (grayscale, sepia, etc.)","description":"Implement non-destructive image filters that are stored in element data and applied via CSS filters.\n\n## Filter Properties to Support\n- grayscale: 0-100%\n- brightness: 0-200% (100 = normal)\n- contrast: 0-200% (100 = normal)\n- blur: 0-20px\n- sepia: 0-100%\n- saturate: 0-200% (100 = normal)\n- hue-rotate: 0-360deg\n- invert: 0-100%\n- opacity: 0-100%\n\n## Requirements\n- Store filter settings in elementData.filters object\n- Apply filters via CSS filter property on image elements\n- Filters persist through save/load cycle\n- Reset filters option to clear all filters\n- Non-destructive: original image is never modified\n\n## Technical Implementation\n- Extend image element data model with 'filters' property\n- Add buildFilterString() utility to convert filter object to CSS\n- Apply filters in addImageToCanvas() during render\n- Update filters via updateElementPosition() or new updateElementFilters() function\n- Integrate with undo/redo system","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-09T11:24:52.445176091-05:00","updated_at":"2025-12-09T11:34:19.608816332-05:00","closed_at":"2025-12-09T11:34:19.608816332-05:00","close_reason":"Filter infrastructure complete. Context menu integration works for quick toggles. Ready for dependent issues (filter slider panel, quick toggles, presets).","comments":[{"id":1,"issue_id":"visionboard-ctv","author":"andy","text":"Commit d2b4fa5: Added non-destructive image filters infrastructure with support for grayscale, brightness, contrast, blur, sepia, saturate, hue-rotate, invert, and opacity. Filters persist through save/load and integrate with undo/redo.","created_at":"2025-12-09T16:34:19Z"}]}
{"id":"visionboard-cty","title":"Add input validation for API endpoints (canvas ID, file paths)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T19:46:47.269455632-05:00","updated_at":"2025-12-08T19:54:03.408592078-05:00","closed_at":"2025-12-08T19:54:03.408592078-05:00","close_reason":"Added validation middleware protecting all API endpoints from path traversal and invalid input. Unit tests verify behavior (12 passing)."}
{"id":"visionboard-d9z","title":"Add copy/paste of elements between canvases","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-08T19:46:55.392880324-05:00","updated_at":"2025-12-08T20:24:18.916514516-05:00","closed_at":"2025-12-08T20:24:18.916514516-05:00","close_reason":"Implemented copy/paste/cut/duplicate with Ctrl+C/X/V/D shortcuts"}
{"id":"visionboard-dgz","title":"Add Flip Horizontal / Vertical commands","description":"Allow flipping images horizontally or vertically via context menu.\n\n## Implementation\n- Use CSS transform: scaleX(-1) for horizontal flip\n- Use CSS transform: scaleY(-1) for vertical flip\n- Store flip state in elementData (flipH: boolean, flipV: boolean)\n- Combine with rotation transform if present\n\n## Requirements\n- Toggle behavior (flip again to unflip)\n- Works with multi-selection\n- Integrate with undo/redo system\n- Persists through save/load\n\n## Dependencies\n- Requires context menu infrastructure","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-09T11:25:14.646866437-05:00","updated_at":"2025-12-09T11:44:11.004653087-05:00","closed_at":"2025-12-09T11:44:11.004653087-05:00","close_reason":"Flip commands implemented with keyboard shortcuts, context menu, undo/redo integration.","dependencies":[{"issue_id":"visionboard-dgz","depends_on_id":"visionboard-p4m","type":"blocks","created_at":"2025-12-09T11:27:24.440137156-05:00","created_by":"daemon"}],"comments":[{"id":2,"issue_id":"visionboard-dgz","author":"andy","text":"Commit 9240b55: Added flip horizontal/vertical transforms with CSS transforms. Keyboard shortcuts Ctrl+Shift+H and Alt+V. Persists through save/load.","created_at":"2025-12-09T16:44:10Z"}]}
{"id":"visionboard-ei9","title":"Deduplicate selectElement/deselectElement functions between canvas.js and touch.js","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-08T19:46:38.356562911-05:00","updated_at":"2025-12-08T20:04:02.878838674-05:00","closed_at":"2025-12-08T20:04:02.878838674-05:00","close_reason":"Created selection.js with shared selectionAPI. Both canvas.js and touch.js now use the shared API, eliminating ~130 lines of duplicated code."}
{"id":"visionboard-eiv","title":"Add Bring to Front / Send to Back commands","description":"Allow users to change element z-order via context menu.\n\n## Commands\n- Bring to Front: Set element to highest zIndex\n- Send to Back: Set element to lowest zIndex\n- Bring Forward: Increment zIndex by 1\n- Send Backward: Decrement zIndex by 1\n\n## Requirements\n- Update zIndex in elementData\n- Re-render element order in SVG (may need to reorder DOM nodes)\n- Works with multi-selection\n- Integrate with undo/redo system\n- Keyboard shortcuts: Cmd/Ctrl+] for forward, Cmd/Ctrl+[ for backward\n\n## Dependencies\n- Requires context menu infrastructure","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-09T11:24:52.672851153-05:00","updated_at":"2025-12-09T11:39:28.566930969-05:00","closed_at":"2025-12-09T11:39:28.566930969-05:00","close_reason":"Z-order commands implemented with keyboard shortcuts and context menu integration. Supports multi-selection and undo/redo.","dependencies":[{"issue_id":"visionboard-eiv","depends_on_id":"visionboard-p4m","type":"blocks","created_at":"2025-12-09T11:27:24.378378554-05:00","created_by":"daemon"}],"comments":[{"id":3,"issue_id":"visionboard-eiv","author":"andy","text":"Commit 55ce282: Added z-order management with Bring to Front, Send to Back, Bring Forward, Send Backward. Keyboard shortcuts Ctrl+]/[ work. Context menu actions integrated for all element types.","created_at":"2025-12-09T16:39:28Z"}]}
{"id":"visionboard-ep1","title":"Extract handle creation into loop in createResizeHandles()","description":"The four corner handles (lines 18-38) are created with nearly identical code. Extract into a loop over corners array ['nw','ne','sw','se'] with cursor mapping. Also consolidate the setupResizeHandle calls (lines 60-63) into the same loop.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-10T17:02:24.811892-05:00","created_by":"andy","updated_at":"2026-01-10T18:45:42.506263-05:00","closed_at":"2026-01-10T18:45:42.506263-05:00","close_reason":"Refactored createResizeHandles() to use loop over corners array. Reduced code from 46 lines to 24 lines while maintaining identical functionality.","comments":[{"id":13,"issue_id":"visionboard-ep1","author":"andy","text":"Commit b6433b2: Refactored createResizeHandles to use loop over corners array. Extracted 4 nearly-identical handle creation blocks into a single forEach loop with template literals for cursor/class. Consolidated setupResizeHandle calls into same loop.","created_at":"2026-01-10T23:45:38Z"}]}
{"id":"visionboard-eq4","title":"Fix obsolete file reference in TAURI_SETUP.md","description":"TAURI_SETUP.md line 98 references `canvas.js` but the file is actually `canvas-core.js`.\n\n## Current (incorrect)\n\u003e Modified `canvas.js`, `drag-drop.js`, and `tree-nav.js` to use API adapter\n\n## Correct\n\u003e Modified `canvas-core.js`, `drag-drop.js`, and `tree-nav.js` to use API adapter\n\n## Location\nTAURI_SETUP.md line 98","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T20:43:25.103143-05:00","created_by":"andy","updated_at":"2026-01-10T20:43:25.103143-05:00"}
{"id":"visionboard-esh","title":"Implement rectangle style editor from context menu","description":"The rectangle context menu shows 'Edit Style' option but it just logs 'Rectangle style - not yet implemented' at context-menu.js:603. Should open a style panel to edit fill color, stroke color, stroke width, opacity, corner radius etc.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-09T13:17:35.88182779-05:00","updated_at":"2025-12-09T13:23:55.249452703-05:00","closed_at":"2025-12-09T13:23:55.249452703-05:00","close_reason":"Implemented rectangle style editor with fill, stroke, stroke width, opacity, and corner radius controls. Commit 12f7707."}
{"id":"visionboard-fgg","title":"Implement folder rename from context menu","description":"The folder context menu shows 'Rename' with F2 shortcut but it just logs 'Folder rename - not yet implemented' at context-menu.js:594. Should open an inline rename field or dialog similar to sidebar double-click rename.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-09T13:17:35.660353488-05:00","updated_at":"2025-12-09T13:20:14.996477717-05:00","closed_at":"2025-12-09T13:20:14.996477717-05:00","close_reason":"Implemented folder rename from context menu. Commit 454d388."}
{"id":"visionboard-h38","title":"Add comprehensive keyboard shortcuts with discoverability","description":"Ensure all context menu actions have keyboard shortcuts, and shortcuts are discoverable.\n\n## Keyboard Shortcut Mapping\n### Element Operations\n- Cmd/Ctrl+D: Duplicate\n- Cmd/Ctrl+L: Lock/Unlock\n- Delete/Backspace: Delete element\n- Cmd/Ctrl+C: Copy\n- Cmd/Ctrl+V: Paste\n- Cmd/Ctrl+X: Cut\n\n### Z-Order\n- Cmd/Ctrl+]: Bring Forward\n- Cmd/Ctrl+[: Send Backward\n- Cmd/Ctrl+Shift+]: Bring to Front\n- Cmd/Ctrl+Shift+[: Send to Back\n\n### Filters (when image selected)\n- Cmd/Ctrl+Shift+G: Toggle Grayscale\n- Cmd/Ctrl+Shift+S: Toggle Sepia\n- Cmd/Ctrl+Shift+F: Open Filter Panel\n\n### Flipping\n- Cmd/Ctrl+Shift+H: Flip Horizontal\n- Cmd/Ctrl+Shift+V: Flip Vertical\n\n### Selection\n- Cmd/Ctrl+A: Select All\n- Escape: Deselect All\n\n## Discoverability\n- Show shortcuts in context menu next to each action (e.g., 'Duplicate  ⌘D')\n- Existing ? shortcut overlay should include new shortcuts\n- Tooltips on toolbar buttons should show shortcuts\n\n## Requirements\n- Respect platform conventions (Cmd on Mac, Ctrl on Windows/Linux)\n- Don't conflict with browser shortcuts\n- Shortcuts work when canvas is focused\n\n## Note\nThis issue tracks the overall keyboard shortcut strategy. Individual feature issues should implement their specific shortcuts.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-09T11:26:05.86682068-05:00","updated_at":"2025-12-09T11:42:52.914323655-05:00","closed_at":"2025-12-09T11:42:52.914323655-05:00","close_reason":"Comprehensive keyboard shortcuts implemented. All major actions have shortcuts, visible in help overlay (?) and context menus.","comments":[{"id":4,"issue_id":"visionboard-h38","author":"andy","text":"Commit 091bc29: Added comprehensive keyboard shortcuts including Select All (Ctrl+A), Deselect (Escape), filter toggles, and all z-order/zoom shortcuts. Help overlay updated with all shortcuts organized by category.","created_at":"2025-12-09T16:42:52Z"}]}
{"id":"visionboard-hhd","title":"Add keyboard shortcuts help overlay (press ? to show)","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-08T19:46:47.57431318-05:00","updated_at":"2025-12-08T20:20:56.52397462-05:00","closed_at":"2025-12-08T20:20:56.52397462-05:00","close_reason":"Added keyboard help overlay with ? shortcut and toolbar button"}
{"id":"visionboard-hrw","title":"Add canvas background color setting","description":"Allow setting a background color for each canvas.\n\n## Features\n- Per-canvas background color setting\n- Color picker for custom colors\n- Preset colors (white, light gray, dark gray, black, etc.)\n- Transparent option (shows checkerboard pattern)\n\n## UI Access\n- Context menu on empty canvas space: 'Set Background Color...'\n- Canvas properties/settings panel (if exists)\n\n## Implementation\n- Store backgroundColor in canvas data\n- Apply as CSS background on canvas container\n- Default to current background (white or transparent)\n\n## Requirements\n- Persists through save/load\n- Affects exported images (when export feature exists)","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-09T11:26:30.78381647-05:00","updated_at":"2025-12-09T12:12:08.294438855-05:00","closed_at":"2025-12-09T12:12:08.294438855-05:00","close_reason":"Implemented canvas background color setting with color presets, custom color picker, persistence, and undo/redo support"}
{"id":"visionboard-i12","title":"Add Playwright tests for visual interactions (grid, snap, resize handles)","description":"Need comprehensive Playwright tests for:\n\n## Critical - Resize Handles\n- Resize handles appear on element selection\n- Resize handles follow element during drag\n- Corner handles resize elements correctly\n- Handles work after canvas reload\n\n## Grid/Snap\n- Grid overlay renders when enabled\n- Snap positions elements to grid lines\n- Grid/snap toggles work via keyboard (G, S)\n- Grid/snap toggles work via toolbar buttons\n\n## Element Interactions\n- Element selection works\n- Element dragging works\n- Multi-select drag works\n- Element deletion works\n\n## Export/Import\n- OPML export generates valid file\n- OPML import creates canvases","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T20:43:19.104368478-05:00","updated_at":"2025-12-08T21:01:21.299811438-05:00","closed_at":"2025-12-08T21:01:21.299811438-05:00","close_reason":"Added comprehensive Playwright e2e tests (20 tests covering selection, resize, drag, grid/snap, keyboard shortcuts, OPML, navigation). Also fixed critical resize handle bug - handles weren't appearing due to JSON circular reference error in selection.js"}
{"id":"visionboard-icd","title":"Add Duplicate Element command","description":"Allow duplicating elements via context menu or keyboard shortcut.\n\n## Behavior\n- Creates a copy of selected element(s) offset slightly from original\n- New element gets new unique ID\n- Copies all properties including filters, rotation, etc.\n- New element is automatically selected after duplication\n\n## Requirements\n- Context menu: 'Duplicate' option\n- Keyboard shortcut: Cmd/Ctrl+D\n- Works with multi-selection (duplicate all selected)\n- Integrate with undo/redo system\n- Offset duplicate by ~20px so it's visible\n\n## Dependencies\n- Requires context menu infrastructure","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-09T11:25:27.026660438-05:00","updated_at":"2025-12-09T11:39:44.356225112-05:00","closed_at":"2025-12-09T11:39:44.356225112-05:00","close_reason":"Duplicate Element already implemented via clipboardManager.duplicateSelected(). Ctrl+D shortcut and context menu action working.","dependencies":[{"issue_id":"visionboard-icd","depends_on_id":"visionboard-p4m","type":"blocks","created_at":"2025-12-09T11:27:24.471076385-05:00","created_by":"daemon"}],"comments":[{"id":5,"issue_id":"visionboard-icd","author":"andy","text":"Duplicate functionality already implemented in clipboard.js (duplicateSelected). Ctrl+D keyboard shortcut works. Context menu has Duplicate action. All requirements met.","created_at":"2025-12-09T16:39:44Z"}]}
{"id":"visionboard-ixh","title":"Add double-click to rename canvases in navigator","description":"Allow renaming canvases by double-clicking on them in the sidebar navigator. Should show an inline text input for editing the name.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-08T21:26:10.004921402-05:00","updated_at":"2025-12-09T09:40:49.724047251-05:00","closed_at":"2025-12-09T09:40:49.724047251-05:00","close_reason":"Closed"}
{"id":"visionboard-jk4","title":"Add export canvas as image (PNG/JPG)","description":"Allow exporting the current canvas view as an image file.\n\n## Export Options\n- Format: PNG (with transparency) or JPG\n- Quality: For JPG, allow quality slider\n- Size: Current view, fit all elements, or custom dimensions\n- Include/exclude: Option to include background color\n\n## Implementation\n- Use SVG-to-canvas rendering\n- Convert canvas to blob/data URL\n- Trigger download via Tauri save dialog (already have dialog plugin)\n\n## UI Access\n- File menu: 'Export as Image...'\n- Keyboard shortcut: Cmd/Ctrl+Shift+E\n- Context menu on canvas: 'Export...'\n\n## Requirements\n- Show export progress for large canvases\n- Remember last used settings\n- Handle high-DPI displays correctly","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-09T11:26:30.884627746-05:00","updated_at":"2025-12-09T12:00:43.022107639-05:00","closed_at":"2025-12-09T12:00:43.022107639-05:00","close_reason":"Implemented comprehensive image export with PNG/JPG formats, quality slider, size options, background color, Ctrl+Shift+E shortcut, and context menu integration"}
{"id":"visionboard-jrp","title":"Refactor executeAction() to use handler map","description":"context-menu.js executeAction() has a 216-line switch statement handling 30+ actions.\n\nConvert to an action handler map pattern for better maintainability.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-10T19:12:13.515493-05:00","created_by":"andy","updated_at":"2026-01-10T19:41:49.281214-05:00","closed_at":"2026-01-10T19:41:49.281214-05:00","close_reason":"Refactored executeAction() from 216-line switch to ACTION_HANDLERS map. Tested context menu actions (bring-to-front, duplicate) - all working correctly.","comments":[{"id":18,"issue_id":"visionboard-jrp","author":"andy","text":"Commit 37659bf: Refactored executeAction() from 216-line switch statement to ACTION_HANDLERS map pattern. Added missing 'cut' action and aliases for group menu actions.","created_at":"2026-01-11T00:41:45Z"}]}
{"id":"visionboard-kk1","title":"Document all element properties in ARCHITECTURE.md","description":"ARCHITECTURE.md documents the canvas element schema but is missing several properties that the frontend actually supports.\n\n## Currently documented\n```json\n{\n  \"id\": \"element-uuid\",\n  \"type\": \"image|folder|rectangle\",\n  \"x\": 100, \"y\": 100,\n  \"width\": 200, \"height\": 200,\n  \"rotation\": 0,\n  \"zIndex\": 1,\n  \"src\": \"/api/images/filename.png\",\n  \"targetCanvasId\": \"child-canvas-id\",\n  \"fill\": \"#color\",\n  \"stroke\": \"#color\",\n  \"strokeWidth\": 2\n}\n```\n\n## Missing properties (used in code)\n- `filters` - Object with image filter values (brightness, contrast, etc.)\n- `flipH` / `flipV` - Boolean horizontal/vertical flip flags\n- `opacity` - Number 0-1 for element transparency\n- `cornerRadius` - Number for rounded rectangle corners\n- `name` - String for folder display name\n- `notes` - String for element notes/annotations\n\n## Location\ndocs/ARCHITECTURE.md lines 402-430","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T20:43:51.238734-05:00","created_by":"andy","updated_at":"2026-01-10T20:43:51.238734-05:00"}
{"id":"visionboard-lsk","title":"Redesign toolbar with Linear-inspired dark minimal aesthetic","description":"Current toolbar icons are functional but lack polish. Redesign to match Linear's aesthetic:\n\nLinear design characteristics:\n- Dark backgrounds with subtle borders\n- Monochrome icons with consistent stroke weight\n- Subtle hover states (slight background or opacity change)\n- Clean spacing and alignment\n- Muted colors, accent color used sparingly\n- Icons are simple line art, not filled\n\nCurrent issues:\n- Color palette icons look dated (solid circles)\n- Mixed icon styles\n- Lacks cohesive visual language\n\nGoals:\n- Unified icon style (outline/stroke based)\n- Darker, more subtle color picker\n- Consistent hover/active states\n- Better visual hierarchy","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-08T21:05:17.198134159-05:00","updated_at":"2025-12-08T21:14:54.589353696-05:00","closed_at":"2025-12-08T21:14:54.589353696-05:00","close_reason":"Closed"}
{"id":"visionboard-o37","title":"Update CLAUDE.md project structure to reflect 32 JS modules","description":"The documented project structure shows only 4 JS files (canvas.js, drag-drop.js, tree-nav.js, touch.js) but the codebase now has 32 modules. Update the Project Structure section to list all current modules with brief purpose descriptions.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-09T13:26:18.7235082-05:00","updated_at":"2025-12-09T13:32:17.390289399-05:00","closed_at":"2025-12-09T13:32:17.390289399-05:00","close_reason":"Updated CLAUDE.md project structure from 4 to 32 JS modules with categorized descriptions. Commit 1bc6af8."}
{"id":"visionboard-p4m","title":"Add right-click context menu infrastructure","description":"Create a reusable context menu system that appears on right-click for canvas elements.\n\n## Requirements\n- Event delegation on canvas SVG to handle all elements with one listener\n- Prevent default browser context menu\n- Position menu at mouse location (convert SVG coords to screen coords)\n- Close menu on blur/escape/click outside\n- Support different menu items based on element type (image, folder, rectangle)\n- Support multi-selection context (show appropriate options when multiple elements selected)\n- Clean, minimal UI matching the Linear-inspired toolbar aesthetic\n\n## Menu Structure\n- Images: Filters submenu, Reset Filters, Bring to Front/Back, Duplicate, Copy, Delete, Flip H/V, Lock/Unlock\n- Folders: Rename, Open, Change Color, Delete\n- Canvas (empty space): Paste, Add Rectangle, Select All, Reset View\n\n## Technical Notes\n- Store menu target element reference during open\n- Use existing modal/UI patterns from color-manager.js as reference\n- Menu should be keyboard accessible","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-09T11:24:36.493453152-05:00","updated_at":"2025-12-09T11:32:39.161687025-05:00","closed_at":"2025-12-09T11:32:39.161687025-05:00","close_reason":"Context menu infrastructure complete with element-specific menus, submenus, keyboard accessibility, and dark theme styling. Placeholder actions for layer controls, filters, and transforms ready for dependent issues.","comments":[{"id":6,"issue_id":"visionboard-p4m","author":"andy","text":"Commit 36d307f: Added right-click context menu infrastructure with element-type-specific menus, submenu support, keyboard shortcut display, and Linear-inspired dark theme styling","created_at":"2025-12-09T16:32:35Z"}]}
{"id":"visionboard-ptn","title":"Consolidate element drag logic in canvas-elements.js","description":"makeFolderInteractive() (lines 136-297) and makeElementInteractive() (lines 299-457) share ~80% identical drag handling code.\n\nExtract shared drag logic into a helper function, keeping only the folder-specific double-click navigation as the difference.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T19:12:13.228658-05:00","created_by":"andy","updated_at":"2026-01-10T19:29:00.222815-05:00","closed_at":"2026-01-10T19:29:00.222815-05:00","close_reason":"Extracted shared drag logic into setupElementInteraction() helper, eliminating ~130 lines of duplicate code","comments":[{"id":16,"issue_id":"visionboard-ptn","author":"andy","text":"Commit da9cfed: Extracted shared drag logic into setupElementInteraction() helper function, reducing code duplication by ~130 lines","created_at":"2026-01-11T00:28:52Z"}]}
{"id":"visionboard-q0v","title":"Extract showNotification() to shared module","description":"The showNotification() function is duplicated 11 times across:\n- keyboard-shortcuts.js, z-order.js, alignment.js, transform.js\n- grouping.js, clipboard.js, undo-redo.js, layers-panel.js\n- image-filters.js, zoom-controls.js\n\nCreate a shared notification.js module and update all files to use it.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T19:12:12.936703-05:00","created_by":"andy","updated_at":"2026-01-10T19:19:11.751663-05:00","closed_at":"2026-01-10T19:19:11.751663-05:00","close_reason":"Created notification.js module with configurable colors/timeouts. Removed duplicates from 14 files (140 lines deleted)."}
{"id":"visionboard-qgh","title":"Add quick filter toggles in context menu (Grayscale, Sepia)","description":"Add simple on/off toggles for common filters directly in the context menu.\n\n## Requirements\n- Grayscale toggle: applies 100% grayscale or removes it\n- Sepia toggle: applies 100% sepia or removes it\n- Show checkmark or indicator when filter is active\n- Works with multi-selection (apply to all selected images)\n\n## Dependencies\n- Requires context menu infrastructure\n- Requires non-destructive image filters system","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-09T11:24:52.574179827-05:00","updated_at":"2025-12-09T11:38:06.550481076-05:00","closed_at":"2025-12-09T11:38:06.550481076-05:00","close_reason":"Quick filter toggles implemented with visual feedback. Context menu shows active filter state with checkmarks.","dependencies":[{"issue_id":"visionboard-qgh","depends_on_id":"visionboard-p4m","type":"blocks","created_at":"2025-12-09T11:27:24.347723389-05:00","created_by":"daemon"},{"issue_id":"visionboard-qgh","depends_on_id":"visionboard-ctv","type":"blocks","created_at":"2025-12-09T11:27:24.363325624-05:00","created_by":"daemon"}],"comments":[{"id":7,"issue_id":"visionboard-qgh","author":"andy","text":"Commit f91401f: Added checkmarks for active filters in context menu submenu. Grayscale, Sepia, and Invert show green check icon when active. Reset Filters disabled when no filters applied.","created_at":"2025-12-09T16:38:06Z"}]}
{"id":"visionboard-r8z","title":"Add element comments/notes","description":"Allow attaching notes to individual elements.\n\n## Features\n- Add text note to any element\n- Notes visible via indicator icon on element\n- Click indicator to view/edit note\n- Notes searchable (future: find elements by note content)\n\n## Data Model\nAdd to elementData:\n{\n  'note': 'This is the hero image for the landing page'\n}\n\n## UI\n- Context menu: 'Add Note...' / 'Edit Note...'\n- Small icon indicator when element has note\n- Note editor: simple text area popup\n\n## Use Cases\n- Document design decisions\n- Leave reminders for future editing\n- Annotate images with context","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-09T11:26:48.597688724-05:00","updated_at":"2025-12-09T12:26:53.773023332-05:00","closed_at":"2025-12-09T12:26:53.773023332-05:00","close_reason":"Added element-notes.js with modal editor and note indicators. Integrated via context menu (Add/Edit Note). Notes stored in elementData.note and persisted with canvas."}
{"id":"visionboard-sy3","title":"Add element locking (prevent accidental moves)","description":"Allow locking elements to prevent accidental movement or modification.\n\n## Behavior\n- Locked elements cannot be dragged or resized\n- Locked elements can still be selected (to unlock)\n- Visual indicator for locked state (small lock icon or different selection style)\n- Context menu shows 'Lock' or 'Unlock' based on current state\n\n## Implementation\n- Add 'locked: boolean' to elementData\n- Check locked state in drag/resize handlers\n- Show lock indicator in UI\n- Keyboard shortcut: Cmd/Ctrl+L to toggle lock\n\n## Requirements\n- Works with multi-selection (lock/unlock all selected)\n- Integrate with undo/redo system\n- Persists through save/load\n\n## Dependencies\n- Requires context menu infrastructure","status":"closed","priority":4,"issue_type":"feature","created_at":"2025-12-09T11:25:26.92851495-05:00","updated_at":"2025-12-09T12:21:24.382180789-05:00","closed_at":"2025-12-09T12:21:24.382180789-05:00","close_reason":"Implemented element locking with drag/resize prevention, context menu toggle, Ctrl+L shortcut, and layers panel integration","dependencies":[{"issue_id":"visionboard-sy3","depends_on_id":"visionboard-p4m","type":"blocks","created_at":"2025-12-09T11:27:24.454348662-05:00","created_by":"daemon"}]}
{"id":"visionboard-uix","title":"Add Zoom to Fit command","description":"Auto-zoom canvas to show all elements.\n\n## Behavior\n- Calculate bounding box of all elements\n- Set viewBox to fit all elements with padding\n- Smooth animated transition to new view\n\n## Variations\n- Zoom to Fit All: Show all elements on canvas\n- Zoom to Selection: Fit selected elements in view\n- Zoom to 100%: Reset to actual size\n- Zoom to Fit Width/Height: Fit canvas width or height\n\n## UI Access\n- View menu options\n- Keyboard shortcuts:\n  - Cmd/Ctrl+0: Zoom to Fit All\n  - Cmd/Ctrl+1: Zoom to 100%\n  - Cmd/Ctrl+2: Zoom to Selection\n- Toolbar zoom controls (optional)\n\n## Requirements\n- Handle empty canvas gracefully\n- Respect minimum/maximum zoom limits","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-09T11:26:48.498491898-05:00","updated_at":"2025-12-09T11:41:30.973801628-05:00","closed_at":"2025-12-09T11:41:30.973801628-05:00","close_reason":"Zoom controls implemented with smooth animation, keyboard shortcuts, and context menu integration.","comments":[{"id":8,"issue_id":"visionboard-uix","author":"andy","text":"Commit 65c2a7b: Added zoom controls with Zoom to Fit All (Ctrl+0), Zoom to 100% (Ctrl+1), and Zoom to Selection (Ctrl+2). Smooth animated transitions with cubic easing.","created_at":"2025-12-09T16:41:30Z"}]}
{"id":"visionboard-wgj","title":"Add alignment tools for selected elements","description":"Provide tools to align multiple selected elements.\n\n## Alignment Options\n- Align Left: Align left edges to leftmost element\n- Align Center (H): Align horizontal centers\n- Align Right: Align right edges to rightmost element\n- Align Top: Align top edges to topmost element\n- Align Middle (V): Align vertical centers\n- Align Bottom: Align bottom edges to bottommost element\n\n## Distribution Options\n- Distribute Horizontally: Even horizontal spacing\n- Distribute Vertically: Even vertical spacing\n\n## UI Access\n- Context menu submenu: 'Align' -\u003e options\n- Toolbar buttons (optional)\n- Keyboard shortcuts (optional, maybe with Alt modifier)\n\n## Requirements\n- Only enabled when 2+ elements selected\n- Works with mixed element types\n- Integrate with undo/redo system\n\n## Dependencies\n- Requires context menu infrastructure","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-09T11:26:06.073972432-05:00","updated_at":"2025-12-09T12:08:13.315167892-05:00","closed_at":"2025-12-09T12:08:13.315167892-05:00","close_reason":"Implemented alignment and distribution tools via context menu submenu","dependencies":[{"issue_id":"visionboard-wgj","depends_on_id":"visionboard-p4m","type":"blocks","created_at":"2025-12-09T11:27:24.487368254-05:00","created_by":"daemon"}]}
{"id":"visionboard-wzs","title":"Add filter slider panel for fine-tuning","description":"Create a panel/modal with sliders for fine-tuning image filter values.\n\n## UI Design\n- Opens from context menu 'Adjust Filters...' option\n- Shows sliders for each filter property\n- Real-time preview as sliders are adjusted\n- Reset button to restore defaults\n- Apply/Cancel buttons or auto-apply with undo support\n\n## Sliders\n- Brightness (0-200%, default 100)\n- Contrast (0-200%, default 100)\n- Saturation (0-200%, default 100)\n- Grayscale (0-100%, default 0)\n- Sepia (0-100%, default 0)\n- Blur (0-20px, default 0)\n- Hue Rotate (0-360°, default 0)\n- Invert (0-100%, default 0)\n- Opacity (0-100%, default 100)\n\n## Requirements\n- Match Linear-inspired dark minimal aesthetic\n- Responsive and works on various screen sizes\n- Keyboard accessible\n- Escape to cancel, Enter to apply\n\n## Dependencies\n- Requires non-destructive image filters system\n- Requires context menu infrastructure","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-09T11:25:14.416860744-05:00","updated_at":"2025-12-09T12:02:38.677463421-05:00","closed_at":"2025-12-09T12:02:38.677463421-05:00","close_reason":"Implemented filter slider panel with real-time preview, all 9 filter types, Reset All button, and keyboard support","dependencies":[{"issue_id":"visionboard-wzs","depends_on_id":"visionboard-ctv","type":"blocks","created_at":"2025-12-09T11:27:24.393327716-05:00","created_by":"daemon"},{"issue_id":"visionboard-wzs","depends_on_id":"visionboard-p4m","type":"blocks","created_at":"2025-12-09T11:27:24.40899514-05:00","created_by":"daemon"}]}
{"id":"visionboard-x1x","title":"Resize handles should track element during resize","description":"When resizing an image, the blue selection rectangle and corner drag handles remain stationary while the image resizes. They should track the corners/edges of the resizing image in real-time.\n\n**Location:** setupResizeHandle() in canvas-resize.js has code attempting to update handles during mousemove, but it's not working.\n\n**Expected:** Handles and selection outline follow the element as it's being resized.\n**Actual:** Handles stay in original position until resize completes.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-10T18:53:58.369672-05:00","created_by":"andy","updated_at":"2026-01-10T18:56:25.743863-05:00","closed_at":"2026-01-10T18:56:25.743863-05:00","close_reason":"Fixed handle tracking - handles and selection rect now update during resize"}
{"id":"visionboard-x85","title":"Extract onReady() utility function","description":"The DOMContentLoaded/readyState initialization pattern is duplicated 8 times:\n- keyboard-shortcuts.js, z-order.js, transform.js, grouping.js\n- clipboard.js, undo-redo.js, layers-panel.js, zoom-controls.js\n\nExtract to a shared utility function.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T19:12:13.090848-05:00","created_by":"andy","updated_at":"2026-01-10T19:21:20.429169-05:00","closed_at":"2026-01-10T19:21:20.429169-05:00","close_reason":"Added onReady() utility function to config.js and refactored 8 files to use it: keyboard-shortcuts.js, z-order.js, transform.js, grouping.js, clipboard.js, undo-redo.js, layers-panel.js, and zoom-controls.js. Removed 32 lines of duplicated code.","comments":[{"id":15,"issue_id":"visionboard-x85","author":"andy","text":"Commit dd9b8e5: Added onReady() utility to config.js and refactored 8 files","created_at":"2026-01-11T00:21:16Z"}]}
{"id":"visionboard-y91","title":"Refactor canvas.js (1253 lines) - split into canvas-core.js, canvas-selection.js, canvas-resize.js","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-08T19:46:38.260536128-05:00","updated_at":"2025-12-08T20:15:56.380469755-05:00","closed_at":"2025-12-08T20:15:56.380469755-05:00","close_reason":"Refactored canvas.js (1110 lines) into canvas-core.js (615), canvas-elements.js (290), canvas-resize.js (258)"}
{"id":"visionboard-z3a","title":"Add toolbar zoom/scaling option for HiDPI accessibility","description":"User requested feature to show toolbar at 2x size for HiDPI screens. Consider adding a scale option (1x, 1.5x, 2x) for toolbar elements to improve accessibility on high-density displays.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-09T11:32:55.856727086-05:00","updated_at":"2025-12-09T11:36:49.037095806-05:00","closed_at":"2025-12-09T11:36:49.037095806-05:00","close_reason":"Toolbar scaling implemented with 3 scale options (1x, 1.5x, 2x) accessible via keyboard shortcut. Scale persists across sessions.","comments":[{"id":9,"issue_id":"visionboard-z3a","author":"andy","text":"Commit b32e124: Added toolbar scale feature with CSS custom properties. Users can press Ctrl+Shift+= to cycle through 1x, 1.5x, and 2x scale. Preference persists in localStorage.","created_at":"2025-12-09T16:36:49Z"}]}
